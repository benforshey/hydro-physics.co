{"version":3,"sources":["main.js"],"names":["inputs","document","getElementsByTagName","feedbackContainer","getElementsByClassName","form","getElementById","security","URL","clearFeedback","firstChild","removeChild","giveFeedback","className","message","feedback","createElement","innerHTML","appendChild","sendReport","AJAX","XMLHttpRequest","payload","FormData","value","navigator","onLine","addEventListener","e","target","status","ga","hitType","eventCategory","eventAction","eventLabel","reset","open","send","length","preventDefault"],"mappings":";;AAAA;AACA;AACA,IAAMA,SAASC,SAASC,oBAAT,CAA8B,OAA9B,CAAf;AACA,IAAMC,oBAAoBF,SAASG,sBAAT,CAAgC,eAAhC,CAA1B;AACA,IAAMC,OAAOJ,SAASK,cAAT,CAAwB,aAAxB,CAAb;AACA,IAAMC,WAAWN,SAASK,cAAT,CAAwB,YAAxB,CAAjB;AACA,IAAME,MAAM,sCAAZ;;AAEA,SAASC,aAAT,GAAyB;AACvB,SAAON,kBAAkB,CAAlB,EAAqBO,UAA5B,EAAwC;AAAE;AACxCP,sBAAkB,CAAlB,EAAqBQ,WAArB,CAAiCR,kBAAkB,CAAlB,EAAqBO,UAAtD;AACD;AACF;;AAED,SAASE,YAAT,CAAsBC,SAAtB,EAAiCC,OAAjC,EAA0C;AACxC,MAAMC,WAAWd,SAASe,aAAT,CAAuB,GAAvB,CAAjB;;AAEAP;;AAEAM,WAASF,SAAT,GAAqBA,SAArB;AACAE,WAASE,SAAT,GAAqBH,OAArB;AACAX,oBAAkB,CAAlB,EAAqBe,WAArB,CAAiCH,QAAjC;AACD;;AAED,SAASI,UAAT,GAAsB;AACpB,MAAMC,OAAO,IAAIC,cAAJ,EAAb;AACA,MAAMC,UAAU,IAAIC,QAAJ,CAAalB,IAAb,CAAhB;AACA,MAAIS,UAAU,EAAd;;AAEA,MAAIP,SAASiB,KAAb,EAAoB;AAAE;AACpBV,cAAU,4JAAV;AACAF,iBAAa,gBAAb,EAA+BE,OAA/B;AACD,GAHD,MAGO,IAAIW,UAAUC,MAAd,EAAsB;AAAE;AAC7BZ,cAAU,iDAAV;AACAF,iBAAa,kBAAb,EAAiCE,OAAjC;;AAEAM,SAAKO,gBAAL,CAAsB,MAAtB,EAA8B,UAACC,CAAD,EAAO;AACnC,UAAIA,EAAEC,MAAF,CAASC,MAAT,KAAoB,GAAxB,EAA6B;AAAE;AAC7BhB,kBAAU,wBAAV;;AAEAF,qBAAa,kBAAb,EAAiCE,OAAjC;;AAEAiB,WAAG,MAAH,EAAW,EAAE;AACXC,mBAAS,OADA;AAETC,yBAAe,MAFN;AAGTC,uBAAa,MAHJ;AAITC,sBAAY;AAJH,SAAX;;AAOA9B,aAAK+B,KAAL,GAZ2B,CAYb;AACf,OAbD,MAaO;AAAE;AACPtB,kBAAU,qKAAV;;AAEAF,qBAAa,kBAAb,EAAiCE,OAAjC;AACD;AACF,KAnBD;;AAqBAM,SAAKiB,IAAL,CAAU,MAAV,EAAkB7B,GAAlB,EAAuB,IAAvB;AACAY,SAAKkB,IAAL,CAAUhB,OAAV;AACD,GA3BM,MA2BA;AAAE;AACPR,cAAU,mOAAV;AACAF,iBAAa,gBAAb,EAA+BE,OAA/B;AACD;AACF;;AAED,IAAId,OAAOuC,MAAX,EAAmB;AACjBtC,WAAS0B,gBAAT,CAA0B,QAA1B,EAAoC,UAACC,CAAD,EAAO;AACzCA,MAAEY,cAAF;AACA,WAAOrB,YAAP;AACD,GAHD;AAID","file":"main.js","sourcesContent":["/* eslint-env browser */\n/* global ga */\nconst inputs = document.getElementsByTagName('input');\nconst feedbackContainer = document.getElementsByClassName('form_feedback');\nconst form = document.getElementById('contactForm');\nconst security = document.getElementById('altMessage');\nconst URL = 'https://message.integrisweb.com/sms/';\n\nfunction clearFeedback() {\n  while (feedbackContainer[0].firstChild) { // remove other feedback\n    feedbackContainer[0].removeChild(feedbackContainer[0].firstChild);\n  }\n}\n\nfunction giveFeedback(className, message) {\n  const feedback = document.createElement('p');\n\n  clearFeedback();\n\n  feedback.className = className;\n  feedback.innerHTML = message;\n  feedbackContainer[0].appendChild(feedback);\n}\n\nfunction sendReport() {\n  const AJAX = new XMLHttpRequest();\n  const payload = new FormData(form);\n  let message = '';\n\n  if (security.value) { // if the security input has a value, it's been filled\n    message = 'Sorry for the inconvenience, but you somehow triggered our anti-spam protection. Please use the contact information at the bottom of the page to reach us.';\n    giveFeedback('feedback_error', message);\n  } else if (navigator.onLine) { // online\n    message = 'Sending your message. Please wait for a moment.';\n    giveFeedback('feedback_warning', message);\n\n    AJAX.addEventListener('load', (e) => {\n      if (e.target.status === 200) { // if the message was sent\n        message = 'Your message was sent!';\n\n        giveFeedback('feedback_success', message);\n\n        ga('send', { // since GA is loaded in the head, assume its presence\n          hitType: 'event',\n          eventCategory: 'Form',\n          eventAction: 'send',\n          eventLabel: 'Contact Form',\n        });\n\n        form.reset(); // reset the form\n      } else { // something nonspecific has gone wrong\n        message = 'Sorry for the inconvenience, but your message may have not sent. You can try sending it again or use the contact information at the bottom of the page to reach us.';\n\n        giveFeedback('feedback_warning', message);\n      }\n    });\n\n    AJAX.open('POST', URL, true);\n    AJAX.send(payload);\n  } else { // offline\n    message = 'Sorry for the inconvenience, but you cannot send messages while offline. You can try sending the message again when you have a reliable internet connection or use the contact information at the bottom of the page to reach us.';\n    giveFeedback('feedback_error', message);\n  }\n}\n\nif (inputs.length) {\n  document.addEventListener('submit', (e) => {\n    e.preventDefault();\n    return sendReport();\n  });\n}\n"]}